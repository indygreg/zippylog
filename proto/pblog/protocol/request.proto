// this file describes protocol buffer messages sent by the client when
// communicating with a pblog server

package pblog.protocol.request;

// requesting status of the pblog server's store
message StoreInfo {

}

// start streaming events as they hit the remote store
// this is not reliable
message Stream {
    // list of paths to subscribe to
    // string value is a store path (e.g. '/bucket/set')
    repeated string path = 1;
}

// download stream(s) from the server
message Get {
    // list of streams to get
    // each includes metadata on how to get it
    repeated GetStreamDescription stream = 1;
}

// describes how to get an individual stream
message GetStreamDescription {
    // path to stream to get
    optional string path = 1;
    
    // OR
    
    // components of path to retrieve
    optional string bucket = 2;
    optional string stream_set = 3;
    optional string stream = 4;
    
    // offsets within stream to fetch, in bytes
    // end_byte_offset is typically discovered by querying the server to see
    // what offsets are available
    optional uint64 start_byte_offset = 5;
    optional uint64 end_byte_offset = 6;
}

